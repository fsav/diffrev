<html>
<head>
<title>Revision list</title>
<script language="javascript">
<!--
function $(id){
    return document.getElementById(id);
}

var in_the_middle_of_selecting_all = false;

var checkboxes = [%(checkbox_list)s];
var ids_for_checkboxes = [%(revision_ids)s];

function update_list(){
    if(!in_the_middle_of_selecting_all){
        var active_revnos = [];
        var i=0;
        for(i=0; i<checkboxes.length; i++){
            cb = $(checkboxes[i]);
            cb_id = ids_for_checkboxes[i];
            if(cb.checked){
                active_revnos.push(""+cb_id);
            }
        }
        var textval = "diffrevision.py finished " + active_revnos.join(" ")
        $('ta_revs_done').value = textval;
    }
}

function select_all(){
    // avoid triggering update_list() every time we select a box in the loop...
    in_the_middle_of_selecting_all = true;

    for(i=0; i<checkboxes.length; i++){
        cb = $(checkboxes[i]);
        cb.checked = true;
    }

    in_the_middle_of_selecting_all = false;

    update_list();
}

//-->
</script>
<style type="text/css">
BODY {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    background-color: black;
    color: white;
}
.header {
    font-size: x-large;
    color: white;
    background-color: #06c;
    padding: 10px;
}
.revision_list ul {
    list-style: none;
}
.footer {
    color: black;
    background-color: #ddd;
    padding: 10px;
}
</style>
</head>
<body onload="update_list()">

    <div class="header">Revision list</div>

    <div class="revision_list"><ul>
%(revisions_list_html)s
    </ul></div>

    <div style="margin: 10px;">
        <input type="button" onclick="select_all();" value="Select all"/>
    </div>

    <div class="footer">
        <p>Command to run to reschedule:</p>
        <textarea rows="3" cols="50" id="ta_revs_done" readonly></textarea>
    </div>

    <!-- Usage statistics: please uncomment the following line if you want to be
         considered in usage statistics. See core/configuration.py -->
    <!-- <img src="http://www.fsavard.com/images/diffrevision_usage_statistics.gif" width="10" height="10" /> -->

</body>
</html>

